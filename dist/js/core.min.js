!function(t,n){"function"==typeof define&&define.amd?define([],function(){return t.Mk=n(t)}):"object"==typeof module&&module.exports?module.exports=t.document?n(t):function(t){if(!t.document)throw new Error("Mk[ui] requires a window with a document");return n(t)}:t.Mk=n(t)}("undefined"!=typeof window&&window||this,function(t){"use strict";function n(){}var e={}.hasOwnProperty;return n.$=function(n,e){return t.jQuery(n,e)},n.fn={noop:function(){},keycodes:{backspace:8,tab:9,enter:13,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,left:37,right:39,comma:188},uid:function(){return"xxxx-4xxx-yxxx".replace(/[xy]/g,function(t){var n=16*Math.random()|0,e="x"==t&&n||3&n|8;return e.toString(16)})},property:function(t,e,i){var r,o=Object.getOwnPropertyDescriptor(e,i),a=(void 0!==o.get||void 0!==o.set)&&o||{value:e[i]};n.type(a.value,"function")&&(r=n.fn.wrapFunction(e[i],i),a={get:function(){return r},set:function(t){return n.type(t,"function")?void(r=n.fn.wrapFunction(t,i)):void(r=t)}}),Object.defineProperty(t,i,a)},wrapFunction:function(t,e){if(t._id_)return t;var i=function(){this._pushSuper(e);var n=t.apply(this,arguments);return this._popSuper(e),n};return i._id_=n.fn.uid(),i.toString=function(){return t.toString()},i},pushSuper:function(t){this._chain_=this._chain_||[],this._chain_.push(t)},popSuper:function(t){this._chain_.splice(this._chain_.lastIndexOf(t),1)},each:function(t,e,i){var r,o,a=0;if(n.type(e,"arraylike"))for(r=e.length;a<r&&(o=i.call(t,e[a],a,e),o!==!1);a++)o===-1&&([].splice.call(e,a,1),a--,r--);else for(a in e){if(o=i.call(t,e[a],a,e),o===!1)break;o===-1&&delete e[a]}return t},find:function(t,e,i){var r;return n.fn.each(t,e,function(t,n,e){if(r=i.call(this,t,n,e),void 0!==r)return!1}),r},map:function(t,e,i){var r,o,a;if(n.type(e,"arraylike"))r=[],Array.prototype.map.call(e,function(n,e,a){o=i.call(t,n,e,a),void 0!==o&&r.push(o)});else{r={};for(a in e)o=i.call(t,e[a],a,e),void 0!==o&&(r[a]=o)}return r},filter:function(t,e,i){if(n.type(e,"arraylike"))return Array.prototype.filter.call(e,function(n,e,r){i.call(t,n,e,r)});var r,o={};for(r in e)i.call(t,e[r],r,e)!==!1&&(o[r]=e[r]);return o},eventEmitter:{_add:function(t,n,i,r,o){var a=this.e(n);e.call(t,a.name)||(t[a.name]=[]),t[a.name].push({ns:a.ns||void 0,handler:i||noop,context:r||null,single:o===!0})},e:function(t){return{name:/^(\w+)\.?/.exec(t)[1]||"",ns:(/^\w+(\.?.*)$/.exec(t)||[])[1]||void 0}},args:function(t){for(var n=0,e=[],i=t.length;n<i&&e.push(t[n]);n++);return e},on:function(t,n,e,i){return this._add(t,n,e,i,!1)},one:function(t,n,e,i){return this._add(t,n,e,i,!0)},off:function(t,i,r){var o,a,c,u,s=this.e(i),f=0;if(e.call(t,s.name))for(o=t[s.name],c=s.ns||void 0,u=o.length;f<u;f++)a=o[f],a.ns!==c||!n.type(r,"u")&&r!==a.handler||(o.splice(f,1),u--,f--)},emit:function(n,i){var r,o,a,c=this.args(i),u=c.shift(),s=this.e(u),f=0;if(e.call(n,s.name))for(r=n[s.name],a=r.length;f<a;f++)o=r[f],s.ns&&o.ns!==s.ns||(o.handler.apply(o.context||t,c),o.single&&(r.splice(f,1),a--,f--))}},device:{exp:/(android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini)/i,get is(){return this.exp.test(navigator.userAgent)},get key(){var t=navigator.userAgent,n=(this.exp.exec(t)||[])[1]||"";return n.toLowerCase()}}},n.type=function(t,e){for(var i=e.toLowerCase().split("|"),r=!1,o=0,a=i.length;o<a;o++)if(n.fn.type.is(t,i[o]))return!0;return r},n.fn.type={is:function(t,n){var e=typeof t==n;switch(n){case"empty":e=""===t||null===t||void 0===t||t===!1;break;case"array":e=t instanceof Array;break;case"null":e=null===t;break;case"date":e=t instanceof Date;break;case"instance":e=this.instance(t);break;case"nodelist":e=t instanceof NodeList;break;case"node":e=/1|9|11/.test(t&&t.nodeType||0);break;case"window":e=t===window;break;case"arraylike":e=this.arraylike(t);break;case"class":e=this.clazz(t);break;case"function":e="function"==typeof t&&!this.clazz(t)}return e},arraylike:function(t){if(n.type(t,"function|string|window"))return!1;var e=!!t&&"number"==typeof t.length,i=e&&"length"in t&&t.length;return n.type(t,"array|nodelist")||0===i||e&&i>0&&i-1 in t},instance:function(t){var n=Object.getPrototypeOf(t),e=n&&n.hasOwnProperty("constructor")&&n.constructor,i={}.hasOwnProperty.toString;return("function"==typeof e&&i.call(e)===i.call(Object))!=!0},clazz:function(t){return"function"==typeof t&&Object.keys(t).concat(Object.keys(t.prototype)).length>0}},n.transitions={_enabled:!1,_key:null,_keys:{transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"},get enabled(){return this._enabled},get disabled(){return this._enabled!==!0},get key(){if(this.enabled){if(this._key)return this._key;var t,e=this._keys,i=document.createElement("xanimate");for(t in e)if(!n.type(i.style[t],"undefined"))return this._key=e[t]}},enable:function(){return this._enabled=!0},disable:function(){return this._enabled=!1}},n.template=function(t,e,i,r){return n.fn.template.parse(t,e,i,r)},n.fn.template={markup:{highlight:'<span class="highlight">$1</span>',error:'<span class="error">{{template}} not found</span>'},parse:function(t,n,e,i){t=t||"",e=e||{},i=i||{},i.$key=n;var r=this;return r.get(t,e).replace(/[\r|\t|\n]+/g,"").replace(/{{([^}]+)}}(.*)({{\/\1}})/g,function(t,o,a){return r.statements(t,n,o,a,e,i)}).replace(/{{([^{]+)}}/g,function(t,o){return r.inject(t,n,o,e,i)})},get:function(t,n){var i=t;return n&&e.call(n,t)&&(i=n[t]),i instanceof Array&&(i=i.join("")),i},statements:function(t,n,i,r,o,a){var c=i.split(":"),u=c[0],s=c[1];return e.call(this.map,u)?this.map[u](r,n,o,"if"==u?a:a[s]||a,s):""},inject:function(t,i,r,o,a){var c=r.split(":"),u=c[0],s=c[1];return s&&e.call(this.map,u)?this.map[u](s,i,o,a,s):e.call(a,u)&&!n.type(a[u],"undefined|null")?a[u]:""},map:{loop:function(t,e,i,r,o){var a,c,u,s,f,l=[];if(n.type(r,"number")||(c=parseInt(o,10))>-1)for(a=0;a<(c||r);a++)r.$index=a,l.push(n.template(t,e,i,r));else if(r instanceof Array)for(a=0,u=r.length;a<u;a++)s=r[a],n.type(s,"object")||(s={key:"",value:r[a]}),s.$index=a,l.push(n.template(t,e,i,s));else for(a in r)f=f||0,l.push(n.template(t,e,i,{key:a,value:r[a],$index:f++}));return l.join("")},if:function(t,i,r,o,a){if(e.call(o,a)){var c=o[a];if(!n.type(c,"empty")||c instanceof Array&&c.length>0)return n.template(t,i,r,o)}return""},highlight:function(t,e,i,r,o){var a,c=n.template,u=r.highlight||"",s=r[t];return u&&(a=c.get("highlight",c.markup),s=s.replace(new RegExp("("+u+")","gi"),a)),s},scope:function(t,e,i,r,o){return n.template(t,e,i,r)},template:function(t,e,i,r,o){return n.template(t,e,i,r)}}},n.define=function(t,i){for(var r=n,o=t.split("."),a=0,c=o.length-1;a<c;a++)e.call(r,o[a])&&(r[o[a]]={}),r=r[o[a]];return r[o[o.length-1]]=i},n.get=function(t){for(var i=null,r=n,o=t.split("."),a=0,c=o.length;a<c;a++)e.call(r,o[a])?(i=r[o[a]],r=i):i=null;return i},n.create=function(t,e,i){t=t||"",i=i||e||{},e="function"==typeof e&&e.prototype instanceof n&&e||n;var r,o,a,c=function(){return this._init.apply(this,arguments),this};r=c.prototype=Object.create(e.prototype);for(o in i)n.fn.property(r,i,o);if(e!==n)for(a in e)n.fn.property(c,e,a);return r.constructor=c,r._super_=e,r._chain_=null,this.define(t,c)},n.prototype={name:"",constructor:n,templates:{},formats:{},config:null,events:null,root:null,get _pushSuper(){return n.fn.pushSuper},get _popSuper(){return n.fn.popSuper},get super(){for(var t=this,n=t._chain_||[],i=n[n.length-1],r=n.reduce(function(t,n){return n===i&&t++,t},0);r--;)t=t._super_.prototype;return t&&e.call(t,i)?t[i]:null},get keycode(){return n.fn.keycodes},get transitions(){return n.transitions.enabled},get version(){return"v1.0.0"},get element(){return this.root[0]},get device(){return n.fn.device},$:function(t,e){return n.$(t,e)},uid:function(){return n.fn.uid()},template:function(t,e){return n.template(t,this.name,this.config.templates,e)},format:function(t,e){return n.template(t,this.name,this.config.formats,e)},html:function(t,n){return this.$(this.template(t,n))},each:function(t,e){return n.fn.each(this,t,e)},find:function(t,e){return n.fn.find(this,t,e)},map:function(t,e){return n.fn.map(this,t,e)},filter:function(t,e){return n.fn.filter(this,t,e)},node:function(t,n){return this.$(this.selector(t),n||this.root||null)},selector:function(t){return"."+this.name+(t&&"-"+t||"")},transition:function(t,e){var i=this.$(t),r=n.transitions.key,o=this;return e=e||function(){},r?(i.addClass("transition"),i.one(r,function(t){i.removeClass("transition"),e.call(o,t,i)}),this):(i.removeClass("transition"),this.each(i,function(t){setTimeout(function(){e.call(o,null,o.$(t))},1)}))},clearTransitions:function(t){var e=n.transitions.key;return e&&this.$(t).off(e),this},transitioning:function(t){return this.$(t).hasClass("transition")},delay:function(t,n){var e,i=this;return e=setTimeout(function(){t.call(i),clearTimeout(e),e=null},n||1)},on:function(t,e){return n.fn.eventEmitter.on(this.events,t,e,this),this},one:function(t,e){return n.fn.eventEmitter.one(this.events,t,e,this),this},off:function(t,e){return n.fn.eventEmitter.off(this.events,t,e),this},emit:function(t){return n.fn.eventEmitter.emit(this.events,arguments),this},_init:function(t,n){this._define(t,n),this._build(),this._bind()},_define:function(t,n){return this.root=this.$(t),this.events={},this.config={templates:{},formats:{}},this.each(this.formats,function(t,n){this.config.formats[n]=t}),this.each(this.templates,function(t,n){this.config.templates[n]=t}),this._config(n),this},_config:function(t){t=t||{};var i=this.config;return this.each(t,function(t,r){n.type(t,"object|arraylike")&&e.call(i,r)?this.each(t,function(t,n){i[r][n]=t}):i[r]=t}),this},_param:function(t,n,i,r,o){var a,c;if(e.call(i,t)&&(a=i[t]),void 0===a&&"undefined"!=n&&(a=this.$(o||this.root).data(t)),c=typeof a,c!==n)switch(n){case"boolean":a="true"===a||!1;break;case"number":a=parseFloat(a,10);break;case"string":a+="";case"undefined":a=r;break;case"object":a=null===a?r:a}return i[t]=a,this},_build:function(){},_bind:function(){}},n});