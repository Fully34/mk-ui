!function(t,n){"function"==typeof define&&define.amd?define([],function(){return t.Mk=n(t)}):"object"==typeof module&&module.exports?module.exports=t.document?n(t):function(t){if(!t.document)throw new Error("Mk[ui] requires a window with a document");return n(t)}:t.Mk=n(t)}("undefined"!=typeof window&&window||this,function(t){"use strict";function n(){}function e(t,n,e){var i,r,o=0;if(type(n,"arraylike"))for(i=n.length;o<i&&(r=e.call(t,n[o],o),r!==!1);o++)r===-1&&([].splice.call(n,o,1),o--,i--);else for(o in n){if(r=e.call(t,n[o],o),r===!1)break;r===-1&&delete n[o]}return t}function i(t,n,i){var r;return e(t,n,function(t,n){if(r=i.call(this,t,n),r!==d)return!1}),r}function r(t,n,e){var i,r,o;if(type(n,"arraylike"))i=[],Array.prototype.map.call(n,function(n,o,s){r=e.call(t,n,o,s),r!==d&&i.push(r)});else{i={};for(o in n)r=e.call(t,n[o],o,n),r!==d&&(i[o]=r)}return i}function o(t,n,e){if(type(n,"arraylike"))return Array.prototype.filter.call(n,function(n,i,r){e.call(t,n,i,r)});var i,r,o={};for(i in n)r=e.call(t,n[i],i,n),r===!0&&(o[i]=n[i]);return o}function s(t,n){return this.find(t,n)}var a=function(){},u={}.hasOwnProperty,c=Object.defineProperty,l=Object.getOwnPropertyDescriptor,f=[].slice,h=[].push,p=[].splice,d=void 0,y=document,m=navigator.userAgent,v=/(android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini)/i,g=/1|9|11/,b=/{{([^{]+)}}/g,x=/{{([^}]+)}}(.*)({{\/\1}})/g,w=/[\r|\t|\n]+/g,j=function(){return"xxxx-4xxx-yxxx".replace(/[xy]/g,function(t){var n=16*Math.random()|0,e="x"==t&&n||3&n|8;return e.toString(16)})};n.fn={},n.type=function(t,e){for(var i=e.toLowerCase().split("|"),r=!1,o=0,s=i.length;o<s&&(r=n.type.is(i[o]))!==!0;o++);return r},n.type.is=function(t,e){var i=typeof t==e;switch(e){case"empty":i=""===t||null===t||void 0===t||t===!1;case"array":i=t instanceof Array;case"null":i=null===t;case"date":i=t instanceof Date;case"instance":i=n.type.instance(t);case"nodelist":i=t instanceof NodeList;case"node":i=/1|9|11/.test(t&&t.nodeType||0);case"window":i=t===window;case"arraylike":i=this.arraylike(t);case"class":i=this.clazz(t);case"function":i="function"==typeof t&&!this.clazz(t)}return i},n.type.arraylike=function(t){if(n.type(t,"function|string|window"))return!1;var e=!!t&&"number"==typeof t.length,i=e&&"length"in t&&t.length;return type(t,"array|nodelist")||0===i||e&&i>0&&i-1 in t},n.type.instance=function(t){var n=Object.getPrototypeOf(t),e=n&&n.hasOwnProperty("constructor")&&n.constructor,i={}.hasOwnProperty.toString;return("function"==typeof e&&i.call(e)===i.call(Object))!=!0},n.type.clazz=function(t){return"function"==typeof t&&Object.keys(t).concat(Object.keys(t.prototype)).length>0},n.fn.filter=o,n.fn.each=e,n.fn.find=i,n.fn.map=r,n.fn.property=function(t,e,i){var r,o,s=l(e,i);return type(s.get,"undefined")&&type(s.set,"undefined")?(r=e[i],type(r,"function")?(o=n.fn.wrapFunction(r,i),void c(t,i,{get:function(){return o},set:function(t){var e=t;type(t,"function")&&(e=n.fn.wrapFunction(t,i)),o=e}})):t[i]=r):c(t,i,s)},n.fn.wrapFunction=function(t,n){if(t._id_)return t;var e=function(){this._pushSuper(n);var e=t.apply(this,arguments);return this._popSuper(n),e};return e._id_=j(),e.toString=function(){return t.toString()},e},n.fn.pushSuper=function(t){this._chain_=this._chain_||[],this._chain_.push(t)},n.fn.popSuper=function(t){this._chain_.splice(this._chain_.lastIndexOf(t),1)},n.fn.template=function(t,e,i,r){t=t||"",i=i||{},r=r||{},r.$key=e;var o=n.fn.template,s=o.get(t,i);return s=s.replace(w,"").replace(x,function(t,n,s){return o.statements(t,e,n,s,i,r)}).replace(b,function(t,n){return o.inject(t,e,n,i,r)})},n.fn.template.get=function(t,n){var e=t;return n&&u.call(n,t)&&(e=n[t]),e instanceof Array&&(e=e.join("")),e},n.fn.template.statements=function(t,n,e,i,r,o){var s=e.split(":"),a=s[0],c=s[1];return u.call(this.map,a)?this.map[a](i,n,r,"if"==a?o:o[c]||o,c):""},n.fn.template.inject=function(t,n,e,i,r){var o=e.split(":"),s=o[0],a=o[1];return a&&u.call(this.map,s)?this.map[s](a,n,i,r,a):u.call(r,s)&&!type(r[s],"undefined|null")?r[s]:""},n.fn.template.markup={highlight:['<span class="highlight">',"$1","</span>"],error:['<span class="error">',"{{template}} not found","</span>"]},n.fn.template.map={loop:function(t,e,i,r,o){var s,a,u,c,l,f=[];if(type(r,"number")||(a=parseInt(o,10))>-1)for(s=0;s<(a||r);s++)r.$index=s,f.push(n.fn.template(t,e,i,r));else if(r instanceof Array)for(s=0,u=r.length;s<u;s++)c=r[s],type(c,"object")||(c={key:"",value:r[s]}),c.$index=s,f.push(n.fn.template(t,e,i,c));else for(s in r)l=l||0,f.push(n.fn.template(t,e,i,{key:s,value:r[s],$index:l++}));return f.join("")},if:function(t,e,i,r,o){if(u.call(r,o)){var s=r[o];if(!type(s,"empty")||s instanceof Array&&s.length>0)return n.fn.template(t,e,i,r)}return""},highlight:function(t,e,i,r,o){var s,a=r.highlight||"",u=r[t];return a&&(s=n.fn.template.get("highlight",n.fn.template.markup),u=u.replace(new RegExp("("+a+")","gi"),s)),u},scope:function(t,e,i,r,o){return n.fn.template(t,e,i,r)},template:function(t,e,i,r,o){return n.fn.template(t,e,i,r)}},n.fn.eventEmitter={xname:/^(\w+)\.?/,xns:/^\w+(\.?.*)$/,_add:function(t,n,e,i,r){var o=this.e(n);u.call(t,o.name)||(t[o.name]=[]),t[o.name].push({ns:o.ns||void 0,handler:e||a,context:i||null,single:r===!0})},e:function(t){return{name:this.xname.exec(t)[1]||"",ns:(this.xns.exec(t)||[])[1]||void 0}},args:function(t){for(var n=0,e=[],i=t.length;n<i&&e.push(t[n]);n++);return e},on:function(t,n,e,i){return this._add(t,n,e,i,!1)},one:function(t,n,e,i){return this._add(t,n,e,i,!0)},off:function(t,e,i){var r,o,s,a,c=this.e(e),l=0;if(u.call(t,c.name))for(r=t[c.name],s=c.ns||d,a=r.length;l<a;l++)o=r[l],o.ns!==s||!n.type(i,"u")&&i!==o.handler||(r.splice(l,1),a--,l--)},emit:function(n,e){var i,r,o,s=this.args(e),a=s.shift(),c=this.e(a),l=0;if(u.call(n,c.name))for(i=n[c.name],o=i.length;l<o;l++)r=i[l],c.ns&&r.ns!==c.ns||(r.handler.apply(r.context||t,s),r.single&&(i.splice(l,1),o--,l--))}},n.fn.transition=function(){var t=n.fn.transition;if(t.enabled){if(t.key)return t.key;var e,i=document.createElement("xanimate");for(e in t.keys)if("undefined"!=typeof i.style[e])return t.key=t.keys[e]}return null},n.fn.transition.enabled=!1,n.fn.transition.key=null,n.fn.transition.keys={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"},n.fn.device={get is(){return v.test(m)},get id(){return((v.exec(m)||[])[1]||"").toLowerCase()}};var _={},k=/^\s*<([^>\s]+)/,C={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],li:[1,"<ul>","</ul>"],dd:[1,"<dl>","</dl>"],defaultt:[0,"",""]};return C.caption=C.thead,C.optgroup=C.option,C.tbody=C.thead,C.tfoot=C.thead,C.dt=C.dd,s.data=function(t,n,e){if(t){var i=t._id=t._id||j(),r=_[i]||{},o=e;return null===n?(t._id=null,delete _[i],r):(o===d?o=r[n]||t.getAttribute("data-"+n)||null:null===e?(o=r[n],delete r[n]):r[n]=o,_[i]=r,o)}},s.remove=function(t){var e;n.fn.each(this,t.childNodes,function(t){t&&1===t.nodeType&&n.$.remove(t)});var e=n.$.data(t,null);e&&e.events&&n.fn.each(this,e.events,function(e,i){n.$.off(t,i)}),t.parentNode.removeChild(t)},s.ajax=function(t){return new this.xhr(t)},s.xhr=function(t){this.init(t)},s.xhr.prototype={headers:{"X-Requested-With":"XMLHttpRequest",Accept:"text/javascript, text/html, application/xml, text/xml, */*"},xhr:null,open:!1,options:null,url:function(t){t=t||location.href;var n=t.lastIndexOf("/");return n>-1&&(n=t.indexOf("#"))>-1&&(t=t.substr(0,n)),t},qs:function(t){return t=t||"",type(t,"string")?t:n.fn.map(this,t,function(t,n){return n+"="+encodeURIComponent(t)}).join("&")},init:function(t){return t=t||{},t.url=this.url(t.url),t.data=this.qs(t.data),t.method=(t.method||"GET").toUpperCase(),t.type=t.type||"text",t.headers=t.headers||{},t.async=t.async||!0,t.encode=t.encode||!0,t.encoding=t.encoding||"utf-8",t.user=t.user||"",t.password=t.password||"",t.complete=t.complete||a,t.success=t.success||a,t.error=t.error||a,t.data&&"GET"===t.method&&(t.url=t.url.indexOf("?")>-1&&t.url||t.url+"?",t.url+=t.data,t.data=null),n.fn.each(this,this.headers,function(n,e){u.call(t.headers,e)!==!0&&(t.headers[e]=n)}),t.encode&&["POST","PUT"].indexOf(t.type)>-1&&(t.headers["Content-type"]="application/x-www-form-urlencoded"+t.encoding),this.options=t,t.now!==!1&&this.send(),this},jsonp:function(){if(this.open)return this;var n=this,e=n.options,i=y.createElement("script"),r=e.jsonpid="MKUI"+j().split("-").join(""),o="callback="+r;i.type="text/javascript",i.language="javascript",i.async=e.async,i.src=e.url+(e.url.indexOf("?")>-1&&"&"||"?")+o,i.id=e.scriptid=j(),i.onerror=function(){e.error.call(n)},i.onload=function(){e.complete.call(n)};var s=function(o){n.response=o,n.status=200,i.onload=null,i.onerror=null,i.parentNode.removeChild(i),e.success.call(n,o),delete t[r]};return t[r]=s,y.documentElement.firstChild.appendChild(i),this.open=!0,this.status=0,this},send:function(){if(this.open)return this;var t,e=this,i=e.options;return"jsonp"===i.type?this.jsonp():(t=this.xhr=new XMLHttpRequest,t.open(i.method,i.url,i.async,i.user,i.password),t.onreadystatechange=function(){e.stateChange()},i.user&&"withCredentials"in t&&(t.withCredentials=!0),n.fn.each(this,i.headers,function(n,e){t.setRequestHeader(e,n)}),i.type&&"text"!==i.type&&(t.responseType=i.type),e.open=!0,e.status=0,t.send(i.data),i.async!==!0&&this.stateChange(),this)},abort:function(){if(this.open=!1,this.status=0,this.xhr)return this.xhr.abort(),this.xhr.onreadystatechange=null,this.xhr=null,this;var n=this,e=n.options,i=y.getElementById(e.scriptid),r=e.jsonpid;return i&&i.parentNode.removeChild(i),t[r]=function(){delete t[r]},t[r](),this},stateChange:function(){var t=this.xhr,n=this,e=n.options;4===t.readyState&&(e.complete.call(n,t),n.status=t.status,n.statusText=t.statusText,1223===n.status&&(n.status=204,n.statusText="No Content"),n.open=!1,n.response=t.response||null,""!==t.responseType&&"text"!==t.responseType||(n.response=t.responseText),t.onreadystatechange=function(){},n.status>=200&&n.status<300?e.success.call(n,n.response,t):e.error.call(n,t))}},s.delegate=function(t,n,e){var i={s:!1,t:t};return e?new s(e,t).each(function(t){if(n===t||new s(n).parent(t).length)return i.s=!0,i.t=t,!1}):i.s=!0,i},s.event=function(t,e,i,r,o,a,u){var c,l;return e?(c=function(n){var e,c=!1,l=s.delegate(this,n.target,u);return n.ns?n.ns===r&&l.s&&(e=o.apply(l.t,[n].concat(n.data)),c=!0):l.s&&(e=o.call(l.t,n),c=!0),c&&a&&s.event(t,!1,i,r,o,a,u),e},l=s.data(t,"events")||{},l[i]=l[i]||[],l[i].push({type:i,ns:r,original:o,handler:c,delegate:u}),s.data(t,"events",l),void t.addEventListener(i,c,!1)):(l=(s.data(t,"events")||{})[i]||[],void n.fn.each(this,l,function(n){if((!r||r&&n.ns===r)&&(!o||o===n.original))return t.removeEventListener(i,n.handler),-1}))},s.on=function(t,n,e,i,r,o){var a=n.split("."),u=a.shift();s.event(t,!0,u,a.join("."),i,r,o)},s.off=function(t,n,e){var i=n.split("."),r=i.shift();s.event(t,!1,r,i.join("."),e)},s.emit=function(t,n,e){var i=n.split("."),r=i.shift(),o=new Event(r);o.ns=i.join("."),o.data=e||[],t.dispatchEvent(o)},s.prototype={length:0,context:null,constructor:s,each:function(t){return n.fn.each(this,this,t)},find:function(t,e){t=t||y,e=e||this.length&&this||[y],type(e,"string")?e=new s(e,y):e.nodeType&&(e=[e]);var i=t;return type(t,"string")&&(k.test(t)?i=this.markup(t):(i=[],n.fn.each(this,e,function(n){i=i.concat(f.call(n.querySelectorAll(t)))}))),i&&g.test(i.nodeType)&&(i=[i]),type(i,"arraylike")&&(i=f.call(i)),p.call(this,0,this.length||0),h.apply(this,i),this.context=e,this},is:function(t){var n=new s(t,this.context),e=!1;return this.each(function(t){if(n.each(function(n){if(t===n)return e=!0,!1}),e)return!1}),e},filter:function(t){var n=new s(t,this.context),e=[];return this.each(function(t){n.each(function(n){t===n&&e.push(t)})}),new s(e,this.context)},parent:function(t,n){var e,i=[];return arguments.length?(e=new s(t,n),this.each(function(t){for(;t.parentNode;)e.each(function(n){if(n===t.parentNode)return i.indexOf(n)<0&&i.push(n),!1}),t=t.parentNode})):this.each(function(t){t.parentNode&&i.push(t.parentNode)}),new s(i)},markup:function(t){var n=y.createElement("template");if(n.content)return n.innerHTML=t,f.call(n.content.childNodes);var e=k.exec(t)[1]||null,i=e&&C.hasOwnProperty(e)&&C[e]||C.defaultt,r=0;for(n=y.createElement("div"),n.innerHTML=i[1]+t+i[2];r<i[0];)n=n.firstChild,r++;return f.call(n.childNodes)},html:function(t){return t===d?this.length?this[0].innerHTML:null:this.each(function(e){for(;e.firstChild;)s.remove(e.firstChild);n.fn.each(this,this.markup(t),function(t){e.appendChild(t)})})},text:function(t){return t===d?this.length?this[0].textContent:null:this.each(function(n){n.textContent=t})},nv:function(t,n,e){if("object"==typeof t){for(var i in t)e.call(this,i,t[i]);return this}return e.call(this,t,n)},attr:function(t,n){return this.nv(t,n,function(t,n){return n===d?this.length&&this[0].getAttribute(t):this.each(function(e){return null===n?void e.removeAttribute(t):void e.setAttribute(t,n)})})},prop:function(t,n){return this.nv(t,n,function(t,n){return n===d?this.length&&this[0][t]||null:this.each(function(e){e[t]=n})})},val:function(t){return t===d&&this.length?this[0].value:this.each(function(n){n.value=t})},data:function(t,n){return this.nv(t,n,function(t,n){return n===d?s.data(this[0],t):this.each(function(e){s.data(e,t,n)})})},css:function(t,n){return this.nv(t,n,function(t,n){return n===d&&this.length?getComputedStyle(this[0]).getPropertyValue(n):this.each(function(e){e.style[t]=type(n,"number")&&n+"px"||n})})},hasClass:function(t){var n=!1;return this.each(function(e){if(e.classList.contains(t))return n=!0,!1}),n},addClass:function(t){var e=t.split(" ");return n.fn.each(this,e,function(t){this.each(function(n){n.classList.add(t)})})},removeClass:function(t){var e=t.split(" ");return n.fn.each(this,e,function(t){this.each(function(n){n.classList.remove(t)})})},appendTo:function(t,n){var e=new s(t,n)[0]||null;return e&&this.each(function(t){e.appendChild(t)}),this},prependTo:function(t,n){var e=new s(t,n)[0]||null;return e&&this.each(function(t){return e.firstChild?void e.insertBefore(t,e.firstChild):void e.appendChild(t)}),this},append:function(t,n){if(this.length){var e=this[this.length-1];new s(t,n).each(function(t){e.appendChild(t)})}return this},prepend:function(t,n){if(this.length){var e=this[this.length-1];new s(t,n).each(function(t){return e.firstChild?void e.insertBefore(t,e.firstChild):void e.appendChild(t)})}return this},remove:function(t){var n=this;return arguments.length&&(n=new s(t,this)),n.each(function(t){s.remove(t)}),this},on:function(t,n,e){return e||(e=n,n=null),this.each(function(i){s.on(i,t,"",e,!1,n)})},one:function(t,n,e){return e||(e=n,n=null),this.each(function(i){s.on(i,t,"",e,!0,n)})},off:function(t,n){return this.each(function(e){s.off(e,t,n)})},emit:function(t,n){return this.each(function(e){s.emit(e,t,n)})}},n.$=function(t,n){return new s(t,n)},n.fn.keycodes={backspace:8,tab:9,enter:13,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,left:37,right:39,comma:188},n.define=function(t,e){for(var i=n,r=t.split("."),o=0,s=r.length-1;o<s;o++)u.call(i,r[o])&&(i[r[o]]={}),i=i[r[o]];return i[r[r.length-1]]=e},n.get=function(t){for(var e=null,i=n,r=t.split("."),o=0,s=r.length;o<s;o++)u.call(i,r[o])?(e=i[r[o]],i=e):e=null;return e},n.transitions=function(t){var e=n.fn.transition;return t===!0?e.enabled=!0:t===!1&&(e.enabled=!1),e.enabled},n.create=function(t,e,i){t=t||"",i=i||e||{},e="function"==typeof e&&e.prototype instanceof n&&e||n;var r,o,s=function(){return this._init.apply(this,arguments),this};s.prototype=Object.create(e.prototype);for(r in i)n.fn.property(s.prototype,i,r);if(e!==n)for(o in e)n.fn.property(s,e,o);return s.prototype.constructor=s,s.prototype._super_=e,s.prototype._chain_=null,this.define(t,s)},n.prototype={name:"",constructor:n,templates:{},formats:{},config:null,events:null,root:null,get _pushSuper(){return n.fn.pushSuper},get _popSuper(){return n.fn.popSuper},get super(){for(var t=this,n=t._chain_,e=n[n.length-1],i=n.reduce(function(t,n){return n===e&&t++,t},0);i--;)t=t._super_.prototype;return t&&u.call(t,e)?t[e]:null},get keycode(){return n.fn.keycodes},get transitions(){return n.fn.transition.enabled},get version(){return"v1.0.0"},get element(){return this.root[0]},get device(){return n.fn.device},$:function(t,e){return n.$(t,e)},uid:function(){return j()},template:function(t,e){return n.fn.template(t,this.name,this.config.templates,e)},format:function(t,e){return n.fn.template(t,this.name,this.config.formats,e)},html:function(t,n){return this.$(this.template(t,n))},each:function(t,e){return n.fn.each(this,t,e)},find:function(t,e){return n.fn.find(this,t,e)},map:function(t,e){return n.fn.map(this,t,e)},filter:function(t,e){return n.fn.filter(this,t,e)},node:function(t,n){return this.$(this.selector(t),n||this.root||null)},selector:function(t){return"."+this.name+(t&&"-"+t||"")},transition:function(t,e){var i=this.$(t),r=n.fn.transition(),o=this;return e=e||function(){},r?(i.addClass("transition"),i.one(r,function(t){i.removeClass("transition"),e.call(o,t,i)}),this):(i.removeClass("transition"),this.each(i,function(t){setTimeout(function(){e.call(o,null,o.$(t))},1)}))},clearTransitions:function(t){var e=n.fn.transition();return e&&this.$(t).off(e),this},transitioning:function(t){return this.$(t).hasClass("transition")},delay:function(t,n){var e,i=this;return e=setTimeout(function(){t.call(i),clearTimeout(e),e=null},n||1)},on:function(t,e){return n.fn.eventEmitter.on(this.events,t,e,this),this},one:function(t,e){return n.fn.eventEmitter.one(this.events,t,e,this),this},off:function(t,e){return n.fn.eventEmitter.off(this.events,t,e),this},emit:function(t){return n.fn.eventEmitter.emit(this.events,arguments),this},_init:function(t,n){this._define(t,n),this._build(),this._bind()},_define:function(t,n){return this.root=this.$(t),this.events={},this.config={templates:{},formats:{}},this.each(this.formats,function(t,n){this.config.formats[n]=t}),this.each(this.templates,function(t,n){this.config.templates[n]=t}),this._config(n),this},_config:function(t){t=t||{};var n=this.config;return this.each(t,function(t,e){type(t,"object|arraylike")&&u.call(n,e)?this.each(t,function(t,i){n[e][i]=t}):n[e]=t}),this},_param:function(t,n,e,i,r){var o,s;if(u.call(e,t)&&(o=e[t]),o===d&&"undefined"!=n&&(o=this.$(r||this.root).data(t)),s=typeof o,s!==n)switch(n){case"boolean":o="true"===o||!1;break;case"number":o=parseFloat(o,10);break;case"string":o+="";case"undefined":o=i;break;case"object":o=null===o?i:o}return e[t]=o,this},_build:function(){},_bind:function(){}},n});