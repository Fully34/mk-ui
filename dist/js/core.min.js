!function(t,e){"function"==typeof define&&define.amd?define(["jquery"],function(n){return t.Mk=e(t,n)}):"object"==typeof module&&module.exports?module.exports=t.document?e(t,require("jquery")):function(t){if(!t.document)throw new Error("Mk[ui] requires a window with a document");return e(t,require("jquery"))}:t.Mk=e(t,window.jQuery)}("undefined"!=typeof window&&window||this,function(t,e){"use strict";var n={}.hasOwnProperty,i=function(){};return i.fn={},i.$=e,i.fn.uid=function(){return"mkxxx4xxyxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"==t&&e||3&e|8;return n.toString(16)})},i.type=function(t,e){for(var r,o,a=e.toLowerCase().split("|"),u=a.length,c=i.fn.typemap,s=0;s<u;s++)if(o=a[s],(r=n.call(c,o)?c[o]:c.defaultt)(t,o))return!0;return!1},i.fn.typemap={index:function(t,e){return t.indexOf(e)>-1},array:function(t){return t instanceof Array},empty:function(t){return""===t||null===t||void 0===t||t===!1},null:function(t){return null===t},date:function(t){return t instanceof Date||t===Date},nodelist:function(t){return t instanceof NodeList},node:function(t){return/1|9|11/.test(t&&t.nodeType||0)},window:function(t){return t&&t===t.window},function:function(t){return"function"==typeof t&&!i.fn.typemap.classlike(t)},arraylike:function(t){if(i.type(t,"function|string|window"))return!1;var e=!!t&&"number"==typeof t.length,n=e&&"length"in t&&t.length;return i.type(t,"array|nodelist")||0===n||e&&n>0&&n-1 in t},instance:function(t){var e=Object.getPrototypeOf(t),n=e&&e.hasOwnProperty("constructor")&&e.constructor,i={}.hasOwnProperty.toString;return("function"==typeof n&&i.call(n)===i.call(Object))!=!0},descriptor:function(t){var e=i.fn.typemap.index,n="object"==typeof t&&Object.keys(t||{})||[];if(e(n,"enumerable")&&e(n,"configurable")){if(e(n,"value"))return e(n,"writable");if(e(n,"get"))return e(n,"set")}return!1},classlike:function(t){return"function"==typeof t&&Object.keys(t.prototype).length>0},object:function(t){return!(!t||"object"!=typeof t||t instanceof Array)},defaultt:function(t,e){return typeof t===e}},i.fn.each=function(t,e,n){var r,a,u=0;if(i.type(e,"arraylike"))for(r=e.length;u<r&&(a=n.call(t,e[u],u,e),a!==!1);u++)a===-1&&([].splice.call(e,u,1),u--,r--);else for(u in e){if(a=n.call(t,e[u],u,e),a===!1)break;a===-1&&delete o[u]}return t},i.fn.find=function(t,e,n){var r;return i.fn.each(t,e,function(t,e,i){if(r=n.call(this,t,e,i),void 0!==r)return!1}),r},i.fn.map=function(t,e,n){var r,a,u;if(i.type(e,"arraylike"))r=[],Array.prototype.map.call(e,function(e,i,o){a=n.call(t,e,i,o),void 0!==a&&r.push(a)});else{r={};for(u in o)a=n.call(t,e[u],u,e),void 0!==a&&(r[u]=a)}return r},i.fn.filter=function(t,e,n){if(i.type(e,"arraylike"))return Array.prototype.filter.call(e,function(e,i,r){return n.call(t,e,i,r)});var r,o={};for(r in e)n.call(t,e[r],r,e)!==!1&&(o[r]=e[r]);return o},i.extend=function(t,e,n){var r;if(i.type(n,"undefined"))for(r in e)i.extend(t,e,r);else r=Object.getOwnPropertyDescriptor(e,n),!r||void 0===r.get&&void 0===r.set?i.property(t,n,r.writable?r.value:r):Object.defineProperty(t,n,r);return this},i.property=function(t,e,n){var r,o=n;return i.type(n,"function")&&(r=i.fn.wrapFunction(n,e),o={enumerable:!0,configurable:!0,get:function(){return r},set:function(t){return i.type(t,"function")?void(r=i.fn.wrapFunction(t,e)):void(r=t)}}),i.type(o,"descriptor")||(o={value:n,writable:!0,configurable:!0,enumerable:!0}),Object.defineProperty(t,e,o),this},i.fn.wrapFunction=function(t,e){if(t._id_)return t;var n=function(){this._pushSuper(e);var n=t.apply(this,arguments);return this._popSuper(e),n};return n._id_=i.fn.uid(),n.toString=function(){return t.toString()},n},i.fn.pushSuper=function(t){this._chain_=this._chain_||[],this._chain_.push(t)},i.fn.popSuper=function(t){this._chain_.splice(this._chain_.lastIndexOf(t),1)},i.fn.template={xWhitespace:/[\r|\t|\n]+/g,xStatements:/{{([^}]+)}}(.*)({{\/\1}})/g,xInjections:/{{([^{]+)}}/g,markup:{highlight:'<span class="highlight">$1</span>',error:'<span class="error">{{template}} not found</span>'},parse:function(t,e,n,i){t=t||"",i=i||{},i.$key=e,n=n||{};var r=this;return r.get(t,n).replace(r.xWhitespace,"").replace(r.xStatements,function(t,o,a){return r.statements(t,e,o,a,n,i)}).replace(r.xInjections,function(t,o){return r.inject(t,e,o,n,i)})},get:function(t,e){var i=t;return e&&n.call(e,t)&&(i=e[t]),i instanceof Array&&(i=i.join("")),i},statements:function(t,e,i,r,o,a){var u=i.split(":"),c=u[0],s=u[1];return n.call(this.map,c)?this.map[c](r,e,o,"if"==c?a:a[s]||a,s):""},inject:function(t,e,r,o,a){var u=r.split(":"),c=u[0],s=u[1];return s&&n.call(this.map,c)?this.map[c](s,e,o,a,s):n.call(a,c)&&!i.type(a[c],"undefined|null")?a[c]:""},map:{loop:function(t,e,n,r,o){var a,u,c,s=i.fn.template,f=[],l=0;if(i.type(r,"arraylike"))for(a=r.length;l<a;l++)u=r[l],i.type(u,"object")||(u={key:"",value:u}),u.$index=l,f.push(s.parse(t,e,n,u));else{c=0;for(a in r)f.push(s.parse(t,e,n,{key:a,value:r[l],$index:c++}))}return f.join("")},if:function(t,e,r,o,a){if(n.call(o,a)){var u=o[a];if(!i.type(u,"empty")||u instanceof Array&&u.length>0)return i.fn.template.parse(t,e,r,o)}return""},highlight:function(t,e,n,r,o){var a,u=(i.fn.template,r[o]),c=r.highlight||"";return c&&(a=tp.get("highlight",tp.markup),u=u.replace(new RegExp("("+c+")","gi"),a)),u},scope:function(t,e,n,r){return i.fn.template.parse(t,e,n,r)},template:function(t,e,n,r){return i.fn.template.parse(t,e,n,r)}}},i.fn.eventEmitter={add:function(t){var e=t.bucket,i=this.event(t.type);t.namespace=i.ns,t.type=i.type,n.call(e,i.type)||(e[i.type]=[]),e[i.type].push(t)},event:function(t){return{type:/^(\w+)\.?/.exec(t)[1]||"",namespace:(/^\w+(\.?.*)$/.exec(t)||[])[1]||void 0}},args:function(t){return i.fn.map(this,t,function(t){return t})},on:function(t){return this.add(t)},one:function(t){return t.single=!0,this.add(t)},off:function(t,e,r,o){var a=t.bucket,u=t.handler,c=this.event(t.type);if(n.call(a,c.type))for(var s,f=a[c.type],l=i.type(u,"undefined"),p=c.namespace,h=f.length,d=0;d<h;d++)s=f[d],s.namespace!==p||!l&&u!==s.handler||(f.splice(d,1),h--,d--)},emit:function(e,i){var r=this.args(i),o=r.shift(),a=this.event(o);if(n.call(e,a.type))for(var u,c=a.namespace,s=e[a.type],f=s.length,l=0;l<f;l++)u=s[l],c&&u.namespace!==c||(u.handler.apply(u.context||t,r),u.single&&(s.splice(l,1),f--,l--))}},i.transitions={_enabled:!1,_key:null,_keys:{transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"},get enabled(){return this._enabled},get disabled(){return this._enabled!==!0},get key(){if(this.enabled){if(this._key)return this._key;var t,e=this._keys,n=document.createElement("xanimate");for(t in e)if(!i.type(n.style[t],"undefined"))return this._key=e[t]}},enable:function(){return this._enabled=!0},disable:function(){return this._enabled=!1}},i.fn.keycodes={backspace:8,tab:9,enter:13,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,comma:188},i.define=function(t,e){for(var r=i,o=t.split("."),a=o.length-1,u=0;u<a;u++)n.call(r,o[u])||(r[o[u]]={}),r=r[o[u]];return r[o[a]]=e},i.get=function(t){for(var e=t.split("."),r=e.length,o=i,a=null,u=0;u<r;u++)n.call(o,e[u])?(a=o[e[u]],o=a):a=null;return a},i.create=function(t,e,n){t=t||"",n=n||e||{},e="function"==typeof e&&e.prototype instanceof i&&e||i;var r=function(){return this._init.apply(this,arguments),this};return r.prototype=Object.create(e.prototype),i.extend(r.prototype,n),r.prototype.constructor=r,r.prototype._super_=e,r.prototype._chain_=null,this.define(t,r)},i.prototype={name:"",constructor:i,templates:{},formats:{},config:null,events:null,root:null,deviceExp:/(android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini)/i,get _pushSuper(){return i.fn.pushSuper},get _popSuper(){return i.fn.popSuper},get super(){for(var t=this,e=t._chain_||[],i=e[e.length-1],r=e.reduce(function(t,e){return e===i&&t++,t},0);r--;)t=t._super_.prototype;return t&&n.call(t,i)?t[i]:null},get keycode(){return i.fn.keycodes},get transitions(){return i.transitions.enabled},get version(){return"v1.0.0"},get element(){return this.root[0]},get device(){return this.deviceExp.test(navigator.userAgent)},get devicekey(){var t=navigator.userAgent,e=(this.deviceExp.exec(t)||[])[1]||"";return e.toLowerCase()},$:function(t,e){return i.$(t,e)},uid:function(){return i.fn.uid()},template:function(t,e){return i.fn.template.parse(t,this.name,this.config.templates,e)},format:function(t,e){return i.fn.template.parse(t,this.name,this.config.formats,e)},html:function(t,e){return this.$(this.template(t,e))},each:function(t,e){return i.fn.each(this,t,e)},find:function(t,e){return i.fn.find(this,t,e)},map:function(t,e){return i.fn.map(this,t,e)},filter:function(t,e){return i.fn.filter(this,t,e)},node:function(t,e){return this.$(this.selector(t),e||this.root||null)},selector:function(t){return"."+this.name+(t&&"-"+t||"")},transition:function(t,e){var n=this.$(t),r=i.transitions.key,o=this;return r?(n.addClass("transition"),n.one(r,function(t){n.removeClass("transition"),e.call(o,t,n)}),this):(n.removeClass("transition"),this.each(n,function(t){this.delay(function(){e.call(this,null,this.$(t))},1)}))},clearTransitions:function(t){var e=i.transitions.key;return e&&this.$(t).off(e).removeClass("transition"),this},transitioning:function(t){return this.$(t).hasClass("transition")},delay:function(t,e){var n,i=this;return n=setTimeout(function(){t.call(i),clearTimeout(n),n=null},e||1)},on:function(t,e){return i.fn.eventEmitter.on({bucket:this.events,type:t,handler:e,context:this}),this},one:function(t,e){return i.fn.eventEmitter.one({bucket:this.events,type:t,handler:e,context:this}),this},off:function(t,e){return i.fn.eventEmitter.off({bucket:this.events,type:t,handler:e}),this},emit:function(t){return i.fn.eventEmitter.emit(this.events,arguments),this},_init:function(t,e){this._define(t,e),this._build(),this._bind()},_define:function(t,e){return this.root=this.$(t),this.events={},this.config={templates:{},formats:{}},this.each(this.formats,function(t,e){this.config.formats[e]=t}),this.each(this.templates,function(t,e){this.config.templates[e]=t}),this._config(e),this},_config:function(t){t=t||{};var e=this.config;return this.each(t,function(t,r){i.type(t,"object|arraylike")&&n.call(e,r)?this.each(t,function(t,n){e[r][n]=t}):e[r]=t}),this},_param:function(t,e,i,r,o){var a,u;if(n.call(i,t)&&(a=i[t]),void 0===a&&"undefined"!=e&&(a=this.$(o||this.root).data(t)),u=typeof a,u!==e)switch(e){case"boolean":a="true"===a||!1;break;case"number":a=parseFloat(a,10);break;case"string":a+="";case"undefined":a=r;break;case"object":a=null===a?r:a}return i[t]=a,this},_build:function(){},_bind:function(){}},i});