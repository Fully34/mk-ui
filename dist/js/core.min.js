!function(t,e){"function"==typeof define&&define.amd?define("mk",[],function(){return t.Mk=e(t)}):"object"==typeof module&&module.exports?module.exports=t.document?e(t):function(t){if(!t.document)throw new Error("Mk requires a window with a document");return e(t)}:t.Mk=e(t)}("undefined"!=typeof window?window:this,function(t){function e(){}function n(t,e){return this.find(t,e)}var i=function(){},r={}.hasOwnProperty,o=void 0;e.noop=function(){},e.uid=function(){return"xxxx-4xxx-yxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"==t?e:3&e|8;return n.toString(16)})},e.type=function(t,n){var i=e.typemap;return i.hasOwnProperty(n)&&i[n](t)||!1},e.typemap={s:function(t){return"string"==typeof t},u:function(t){return void 0===t},f:function(t){return"function"==typeof t},n:function(t){return"number"==typeof t},a:function(t){return t instanceof Array},o:function(t){if(!t||"[object object]"!==t.toString().toLowerCase())return!1;var e=Object.getPrototypeOf(t),n=e.hasOwnProperty("constructor")&&e.constructor,i={}.hasOwnProperty.toString,r=i.call(Object);return!e||this.f(n)&&i.call(n)===r},c:function(t){return!!this.f(t)&&Object.keys(t).concat(Object.keys(t.prototype)).length>0},nl:function(t){return t instanceof NodeList},nd:function(t){return t&&1===t.nodeType||!1},al:function(e){if(this.f(e)||this.s(e)||e===t)return!1;var n=!!e&&this.n(e.length)&&"length"in e&&e.length;return this.a(e)||this.nl(e)||0===n||this.n(n)&&n>0&&n-1 in e},bf:function(t){return this.f(t)&&!this.c(t)}},e.copy=function(t){var n,i,r;if(e.type(t,"al"))for(n=0,i=t.length,r=[];n<i&&r.push(e.copy(t[n]));n++);else if(e.type(t,"o")){r={};for(n in t)r[n]=e.copy(t[n]),i=!0}return r||t},e.each=function(t,n,i){var r,o,s=0;if(e.type(n,"al"))for(r=n.length;s<r&&(o=i.call(t,s,n[s]),o!==!1);s++)o===-1&&(n.splice(s,1),s--,r--);else for(s in n){if(o=i.call(t,s,n[s]),o===!1)break;o===-1&&delete n[s]}return t},e.property=function(t,n,i){var r,o,s=Object.getOwnPropertyDescriptor(n,i);return e.type(s.get,"u")?(r=n[i],e.type(r,"bf")?(o=e.wrapFunction(r,i),void Object.defineProperty(t,i,{get:function(){return o},set:function(t){var e=t;MK.type(t,"bf")&&(e=wrapFunction(t)),o=e}})):t[i]=e.copy(r)):Object.defineProperty(t,i,s)},e.wrapFunction=function(t,n){if(t._id_)return t;var i=function(){this._pushsuper_(n);var e=t.apply(this,arguments);return this._popsuper_(n),e};return i._id_=e.uid(),i.toString=function(){return t.toString()},i},e.pushSuper=function(t){var e=this._chain_=this._chain_||[],n=this._stack_=this._stack_||[],i=e.lastIndexOf(t),r=this._super_,o=r&&r.prototype||{},s=this[t];for(i>-1&&(r=n[i].super.prototype._super_||null,o=r&&r.prototype||{});null!==r&&o.hasOwnProperty(t)&&o[t]._id_===s._id_;)r=o._super_||null,o=r&&r.prototype||{};n.push({method:t,super:r}),e.push(t)},e.popSuper=function(t){var e=this._chain_=this._chain_||[],n=this._stack_=this._stack_||[],i=e.lastIndexOf(t);i>-1&&(e.splice(i,1),n.splice(i,1))};var s=/{{([^{]+)}}/g,a=/{{([^}]+)}}(.*)({{\/\1}})/g,u=/[\r|\t|\n]+/g;e.template=function(t,n,i,r){t=t||"",i=i||{},r=r||{},r.$key=n;var o=e.template.get(t,i);return o=o.replace(u,""),o=o.replace(a,function(t,o,s){return e.template.statements(t,n,o,s,i,r)}),o=o.replace(s,function(t,o){return e.template.inject(t,n,o,i,r)})},e.template.get=function(t,e){var n=t;return e&&e.hasOwnProperty(t)&&(n=e[t]),n instanceof Array&&(n=n.join("")),n},e.template.statements=function(t,n,i,o,s,a){var u=i.split(":"),c=u[0],h=u[1];return r.call(e.template.map,c)?e.template.map[c](o,n,s,"if"==c?a:a[h]||a,h):""},e.template.inject=function(t,n,i,o,s){var a=i.split(":"),u=a[0],c=a[1];return c&&r.call(e.template.map,u)?e.template.map[u](c,n,o,s,c):r.call(s,u)&&!e.type(s[u],"u")&&null!==s[u]?s[u]:""},e.template.markup={highlight:['<span class="highlight">',"$1","</span>"],error:['<span class="error">',"{{template}} not found","</span>"]},e.template.map={loop:function(t,n,i,r,o){var s,a,u,c,h,l=[];if(e.type(r,"n")||(a=parseInt(o,10))>-1)for(s=0;s<(a||r);s++)r.$index=s,l.push(e.template(t,n,i,r));else if(r instanceof Array)for(s=0,u=r.length;s<u;s++)c=r[s],"object"!=typeof c&&(c={key:"",value:r[s]}),c.$index=s,l.push(e.template(t,n,i,c));else for(s in r)h=h||0,l.push(e.template(t,n,i,{key:s,value:r[s],$index:h++}));return l.join("")},if:function(t,n,i,o,s){if(r.call(o,s)){var a=o[s];if(void 0!==a&&null!==a&&""!==a&&a!==!1||a instanceof Array&&a.length>0)return e.template(t,n,i,o)}return""},highlight:function(t,n,i,r,o){var s,a=r.highlight||"",u=r[t];return a&&(s=e.template.get("highlight",e.template.markup),u=u.replace(new RegExp("("+a+")","gi"),s)),u},scope:function(t,n,i,r,o){return e.template(t,n,i,r)},template:function(t,n,i,r,o){return e.template(t,n,i,r)}},e.eventEmitter={xname:/^(\w+)\.?/,xns:/^\w+(\.?.*)$/,_add:function(t,n,i,r,o){var s=this.e(n);t.hasOwnProperty(s.name)!==!0&&(t[s.name]=[]),t[s.name].push({ns:s.ns||void 0,handler:i||e.noop,context:r||null,single:o===!0})},e:function(t){return{name:this.xname.exec(t)[1]||"",ns:(this.xns.exec(t)||[])[1]||void 0}},args:function(t){for(var e=0,n=[],i=t.length;e<i&&n.push(t[e]);e++);return n},on:function(t,e,n,i){return this._add(t,e,n,i,!1)},one:function(t,e,n,i){return this._add(t,e,n,i,!0)},off:function(t,n,i){var s,a,u,c,h=this.e(n),l=0;if(r.call(t,h.name))for(s=t[h.name],u=h.ns||o,c=s.length;l<c;l++)a=s[l],a.ns!==u||!e.type(i,"u")&&i!==a.handler||(s.splice(l,1),c=s.length,l--)},emit:function(e,n){var i,o,s,a=this.args(n),u=a.shift(),c=this.e(u),h=0;if(r.call(e,c.name))for(i=e[c.name],s=i.length;h<s;h++)o=i[h],c.ns&&o.ns!==c.ns||(o.handler.apply(o.context||t,a),o.single&&(i.splice(h,1),s--,h--))}},e.transition=function(){var t=e.transition;if(t.enabled){if(t.key)return t.key;var n,i=document.createElement("xanimate");for(n in t.keys)if("undefined"!=typeof i.style[n])return t.key=t.keys[n]}return null},e.transition.enabled=!1,e.transition.key=null,e.transition.keys={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};var c=navigator.userAgent;e.device={agentexp:/(android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini)/i,get is(){return this.agentexp.test(c)},get isAndroid(){return"android"===this.id},get isWebos(){return"webos"===this.id},get isiPhone(){return"iphone"===this.id},get isiPad(){return"ipad"===this.id},get isiPod(){return"ipod"===this.id},get isBlackberry(){return"blackberry"===this.id},get isIEMobile(){return"iemobile"===this.id},get isOperaMini(){return"opera mini"===this.id},get id(){return((this.agentexp.exec(c)||[])[1]||"").toLowerCase()}};var h=document,l={},f=[].slice,p=[].splice,d=[].push,m=/^\s*<([^>\s]+)/,v=/1|9|11/,y={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],li:[1,"<ul>","</ul>"],dd:[1,"<dl>","</dl>"],defaultt:[0,"",""]};return y.caption=y.thead,y.optgroup=y.option,y.tbody=y.thead,y.tfoot=y.thead,y.dt=y.dd,n.data=function(t,n,i){if(t){var r=t._id=t._id||e.uid(),s=l[r]||{},a=i;return null===n?(t._id=null,delete l[r],s):(a===o?(a=s[n]||t.getAttribute("data-"+n)||null,s[n]=a):null===i?(a=s[n],delete s[n]):s[n]=a,l[r]=s,a)}},n.remove=function(t){var n;e.each(this,t.childNodes,function(t,e){e&&1===e.nodeType&&remove(e)});var n=data(t,null);n&&n.events&&e.each(this,n.events,function(e,n){off(t,e)}),t.parentNode.removeChild(t)},n.ajax=function(t){return new this.xhr(t)},n.xhr=function(t){this.init(t)},n.xhr.prototype={headers:{"X-Requested-With":"XMLHttpRequest",Accept:"text/javascript, text/html, application/xml, text/xml, */*"},xhr:null,open:!1,options:null,url:function(t){t=t||location.href;var e=t.lastIndexOf("/");return e>-1&&(e=t.indexOf("#"))>-1&&(t=t.substr(0,e)),t},qs:function(t){if(t=t||"",!e.type(t,"s")){var n=[];return e.each(this,t,function(t,e){n.push(t+"="+encodeURIComponent(e))}),n.join("&")}return t},init:function(t){return t=e.copy(t||{}),t.url=this.url(t.url),t.data=this.qs(t.data),t.method=(t.method||"GET").toUpperCase(),t.type=t.type||"text",t.headers=t.headers||{},t.async=t.async||!0,t.encode=t.encode||!0,t.encoding=t.encoding||"utf-8",t.user=t.user||"",t.password=t.password||"",t.complete=t.complete||i,t.success=t.success||i,t.error=t.error||i,t.data&&"GET"===t.method&&(t.url=t.url.indexOf("?")>-1&&t.url||t.url+"?",t.url+=t.data,t.data=null),e.each(this,this.headers,function(e,n){r.call(t.headers,e)!==!0&&(t.headers[e]=n)}),t.encode&&["POST","PUT"].indexOf(t.type)>-1&&(t.headers["Content-type"]="application/x-www-form-urlencoded"+t.encoding),this.options=t,t.now!==!1&&this.send(),this},jsonp:function(){if(this.open)return this;var n=this,i=n.options,r=h.createElement("script"),o=i.jsonpid="MKUI"+e.uid().split("-").join(""),s="callback="+o;r.type="text/javascript",r.language="javascript",r.async=i.async,r.src=i.url+(i.url.indexOf("?")>-1&&"&"||"?")+s,r.id=i.scriptid=e.uid(),r.onerror=function(){i.error.call(n)},r.onload=function(){i.complete.call(n)};var a=function(e){n.response=e,n.status=200,r.onload=null,r.onerror=null,r.parentNode.removeChild(r),i.success.call(n,e),delete t[o]};return t[o]=a,h.documentElement.firstChild.appendChild(r),this.open=!0,this.status=0,this},send:function(){if(this.open)return this;var t,n=this,i=n.options;return"jsonp"===i.type?this.jsonp():(t=this.xhr=new XMLHttpRequest,t.open(i.method,i.url,i.async,i.user,i.password),t.onreadystatechange=function(){n.stateChange()},i.user&&"withCredentials"in t&&(t.withCredentials=!0),e.each(this,i.headers,function(e,n){t.setRequestHeader(e,n)}),i.type&&"text"!==i.type&&(t.responseType=i.type),n.open=!0,n.status=0,t.send(i.data),i.async!==!0&&this.stateChange(),this)},abort:function(){if(this.open=!1,this.status=0,this.xhr)return this.xhr.abort(),this.xhr.onreadystatechange=null,this.xhr=null,this;var e=this,n=e.options,i=h.getElementById(n.scriptid),r=n.jsonpid;return i&&i.parentNode.removeChild(i),t[r]=function(){delete t[r]},t[r](),this},stateChange:function(){var t=this.xhr,e=this,n=e.options;4===t.readyState&&(n.complete.call(e,t),e.status=t.status,e.statusText=t.statusText,1223===e.status&&(e.status=204,e.statusText="No Content"),e.open=!1,e.response=t.response||null,""!==t.responseType&&"text"!==t.responseType||(e.response=t.responseText),t.onreadystatechange=function(){},e.status>=200&&e.status<300?n.success.call(e,e.response,t):n.error.call(e,t))}},n.delegate=function(t,e,i){var r={s:!1,t:t};return i?new n(i,t).each(function(t,i){if(e===i||new n(e).parent(i).length)return r.s=!0,r.t=i,!1}):r.s=!0,r},n.event=function(t,i,r,o,s,a,u){var c,h;return i?(c=function(e){var i,c=!1,h=n.delegate(this,e.target,u);return e.ns?e.ns===o&&h.s&&(i=s.apply(h.t,[e].concat(e.data)),c=!0):h.s&&(i=s.call(h.t,e),c=!0),c&&a&&n.event(t,!1,r,o,s,a,u),i},h=n.data(t,"events")||{},h[r]=h[r]||[],h[r].push({type:r,ns:o,original:s,handler:c,delegate:u}),n.data(t,"events",h),void t.addEventListener(r,c,!1)):(h=(n.data(t,"events")||{})[r]||[],void e.each(this,h,function(e,n){if((!o||o&&n.ns===o)&&(!s||s===n.original))return t.removeEventListener(r,n.handler),-1}))},n.on=function(t,e,i,r,o,s){var a=e.split("."),u=a.shift();n.event(t,!0,u,a.join("."),r,o,s)},n.off=function(t,e,i){var r=e.split("."),o=r.shift();n.event(t,!1,o,r.join("."),i)},n.emit=function(t,e,n){var i=e.split("."),r=i.shift(),o=new Event(r);o.ns=i.join("."),o.data=n||[],t.dispatchEvent(o)},n.prototype={length:0,context:null,constructor:n,each:function(t){return e.each(this,this,t)},find:function(t,i){t=t||h,i=i||this.length&&this||[h],e.type(i,"s")?i=new n(i,h):i.nodeType&&(i=[i]);var r=t;return e.type(t,"s")&&(m.test(t)?r=this.markup(t):(r=[],e.each(this,i,function(e,n){r=r.concat(f.call(n.querySelectorAll(t)))}))),r&&v.test(r.nodeType)&&(r=[r]),e.type(r,"al")&&(r=f.call(r)),p.call(this,0,this.length||0),d.apply(this,r),this.context=i,this},is:function(t){var e=new n(t,this.context),i=!1;return this.each(function(t,n){if(e.each(function(t,e){if(n===e)return i=!0,!1}),i)return!1}),i},filter:function(t){var e=new n(t,this.context),i=[];return this.each(function(t,n){e.each(function(t,e){n===e&&i.push(n)})}),new n(i,this.context)},parent:function(t,e){var i,r=[];return arguments.length?(i=new n(t,e),this.each(function(t,e){for(;e.parentNode;)i.each(function(t,n){if(n===e.parentNode)return r.indexOf(n)<0&&r.push(n),!1}),e=e.parentNode})):this.each(function(t,e){e.parentNode&&r.push(e.parentNode)}),new n(r)},markup:function(t){var e=h.createElement("template");if(e.content)return e.innerHTML=t,f.call(e.content.childNodes);var n=m.exec(t)[1]||null,i=n&&y.hasOwnProperty(n)&&y[n]||y.defaultt,r=0;for(e=h.createElement("div"),e.innerHTML=i[1]+t+i[2];r<i[0];)e=e.firstChild,r++;return f.call(e.childNodes)},html:function(t){return t===o?this.length?this[0].innerHTML:null:this.each(function(n,i){for(;i.firstChild;)remove(i.firstChild);e.each(this,this.markup(t),function(t,e){i.appendChild(e)})})},text:function(t){return t===o?this.length?this[0].textContent:null:this.each(function(e,n){n.textContent=t})},nv:function(t,e,n){if("object"==typeof t){for(var i in t)n.call(this,i,t[i]);return this}return n.call(this,t,e)},attr:function(t,e){return this.nv(t,e,function(t,e){return e===o?this.length&&this[0].getAttribute(t):this.each(function(n,i){return null===e?void i.removeAttribute(t):void i.setAttribute(t,e)})})},prop:function(t,e){return this.nv(t,e,function(t,e){return e===o?this.length&&this[0][t]||null:this.each(function(n,i){i[t]=e})})},val:function(t){return t===o&&this.length?this[0].value:this.each(function(e,n){n.value=t})},data:function(t,e){return this.nv(t,e,function(t,e){return e===o?n.data(this[0],t):this.each(function(i,r){n.data(r,t,e)})})},css:function(t,n){return this.nv(t,n,function(t,n){return n===o&&this.length?getComputedStyle(this[0]).getPropertyValue(n):this.each(function(i,r){r.style[t]=e.type(n,"n")&&n+"px"||n})})},hasClass:function(t){var e=!1;return this.each(function(n,i){if(i.classList.contains(t))return e=!0,!1}),e},addClass:function(t){var n=t.split(" ");return e.each(this,n,function(t,e){this.each(function(t,n){n.classList.add(e)})})},removeClass:function(t){var n=t.split(" ");return e.each(this,n,function(t,e){this.each(function(t,n){n.classList.remove(e)})})},appendTo:function(t,e){var i=new n(t,e)[0]||null;return i&&this.each(function(t,e){i.appendChild(e)}),this},prependTo:function(t,e){var i=new n(t,e)[0]||null;return i&&this.each(function(t,e){return i.firstChild?void i.insertBefore(e,i.firstChild):void i.appendChild(e)}),this},append:function(t,e){if(this.length){var i=this[this.length-1];new n(t,e).each(function(t,e){i.appendChild(e)})}return this},prepend:function(t,e){if(this.length){var i=this[this.length-1];new n(t,e).each(function(t,e){return i.firstChild?void i.insertBefore(e,i.firstChild):void i.appendChild(e)})}return this},remove:function(t){var e=this;return arguments.length&&(e=new n(t,this)),e.each(function(t,e){remove(e)}),this},on:function(t,e,i){return i||(i=e,e=null),this.each(function(r,o){n.on(o,t,"",i,!1,e)})},one:function(t,e,i){return i||(i=e,e=null),this.each(function(r,o){n.on(o,t,"",i,!0,e)})},off:function(t,e){return this.each(function(i,r){n.off(r,t,e)})},emit:function(t,e){return this.each(function(i,r){n.emit(r,t,e)})}},e.$=function(t,e){return new n(t,e)},e.keycodes={backspace:8,tab:9,enter:13,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,left:37,right:39,comma:188},e.define=function(t,n){for(var i=e,o=t.split("."),s=0,a=o.length-1;s<a;s++)r.call(i,o[s])&&(i[o[s]]={}),i=i[o[s]];return i[o[o.length-1]]=n},e.get=function(t){for(var n=null,i=e,o=t.split("."),s=0,a=o.length;s<a;s++)r.call(i,o[s])?(n=i[o[s]],i=n):n=null;return n},e.transitions=function(t){return t===!0?e.transition.enabled=!0:t===!1&&(e.transition.enabled=!1),e.transition.enabled},e.create=function(t,n,i){t=t||"",i=i||n||{},n="function"==typeof n&&n.prototype instanceof e&&n||e;var r,o,s=function(){return this._init.apply(this,arguments),this};s.prototype=Object.create(n.prototype);for(r in i)e.property(s.prototype,i,r);if(n!==e)for(o in n)e.property(s,n,o);return s.prototype.constructor=s,s.prototype._super_=n,this.define(t,s)},e.prototype={name:"",constructor:e,templates:{},formats:{},config:null,events:null,root:null,get _pushsuper_(){return e.pushSuper},get _popsuper_(){return e.popSuper},get super(){var t,e=this._stack_[this._stack_.length-1];return e&&(t=e.super&&e.super.prototype&&e.super.prototype[e.method]),t},get keycode(){return e.keycodes},get transitions(){return e.transition.enabled},get version(){return"v1.0.0"},get element(){return this.root[0]},get device(){return e.device},$:function(t,n){return new e.$(t,n)},uid:function(){return e.uid()},copy:function(t){return e.copy(t)},template:function(t,n){return e.template(t,this.name,this.config.templates,n)},format:function(t,n){return e.template(t,this.name,this.config.formats,n)},html:function(t,e){return this.$(this.template(t,e))},each:function(t,n){return e.each(this,t,n)},node:function(t,e){return this.$(this.selector(t),e||this.root||null)},selector:function(t){return"."+this.name+(t&&"-"+t||"")},transition:function(t,n){var i=this.$(t),r=e.transition(),o=this;return n=n||function(){},r?(i.addClass("transition"),i.one(r,function(t){i.removeClass("transition"),n.call(o,t,i)}),this):(i.removeClass("transition"),this.each(i,function(t,e){setTimeout(function(){n.call(o,{},o.$(e))},1)}))},clearTransitions:function(t){var n=e.transition();return n&&this.$(t).off(n),this},transitioning:function(t){return this.$(t).hasClass("transition")},delay:function(t,e){var n=this;return setTimeout(function(){t.call(n)},e||1)},on:function(t,n){return e.eventEmitter.on(this.events,t,n,this),this},one:function(t,n){return e.eventEmitter.one(this.events,t,n,this),this},off:function(t,n){return e.eventEmitter.off(this.events,t,n),this},emit:function(t){return e.eventEmitter.emit(this.events,arguments),this},_init:function(t,e){this._define(t,e),this._build(),this._bind()},_define:function(t,e){return this.root=this.$(t),this.events={},this.config={templates:{},formats:{}},this.each(this.formats,function(t,e){this.config.formats[t]=e}),this.each(this.templates,function(t,e){this.config.templates[t]=e}),this._config(e),this},_config:function(t){return t=t||{},this.each(t,function(t,e){var n=!1;"object"==typeof e&&this.config.hasOwnProperty(t)&&this.each(e,function(e,i){this.config[t][e]=i,n=!0}),n===!1&&(this.config[t]=e)}),this},_param:function(t,e,n,i,r){var o,s;if(n.hasOwnProperty(t)&&(o=n[t]),"undefined"==typeof o&&"undefined"!==e&&(o=(r||this.root).data(t)),s=typeof o,s!==e)switch(s){case"boolean":o="true"===o||"false";break;case"number":o=parseFloat(o,10);break;case"string":o=o.toString();case"undefined":o=i;break;case"object":o=null===o?i:o}return n[t]=o,this},_build:function(){},_bind:function(){}},e});