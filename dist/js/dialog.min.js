!function(t,o){if("function"==typeof define&&define.amd)define(["mk"],function(i){return o(t,i)});else{if("object"!=typeof module||!module.exports)return o(t,t.Mk);module.exports=o(t,require("mk"))}}("undefined"!=typeof window?window:this,function(o,i){return i.create("Dialog",i.Tooltip,{name:"mk-dg",modal:null,get _locked(){return this.root.hasClass("--locked")},get _unlocked(){return this.root.hasClass("--locked")!==!0},get locked(){return this.root.hasClass("locked")},get unlocked(){return this.root.hasClass("locked")!==!0},get isOpen(){return"true"!==this.modal.attr("aria-hidden")},get isHidden(){return"false"!==this.modal.attr("aria-hidden")},get focusable(){return this.isFocusable(this.modal)},_config:function(t){t=t||{},t.position=t.position||"bottom-left",this.super(t)},_build:function(){this.link(),this.modal=this.$("#"+this.root.attr("aria-describedby"))},_bind:function(){var t=this;this.root.on("click.mk",function(o){o.preventDefault(),t._click()}).on("mouseenter.mk, focus.mk",function(o){o.preventDefault(),t._over("mouseenter"!==o.type)}).on("mouseleave.mk, blur.mk",function(o){o.preventDefault(),t._out("mouseleave"!==o.type)}).on("keyup.mk",function(o){t._keyup(o)}),this.$(document.documentElement).off("mousedown.mk-dg").on("mousedown.mk-dg",function(o){t._down(o)})},_keyup:function(t){t.which===this.keycode.esc&&this._unlock().hide()},_click:function(){"click"===this.root.data("action")&&this.toggle()},_over:function(t){"click"!==this.root.data("action")&&(this.show(),t===!0&&this.focusable&&this._lock())},_out:function(t){"click"!==this.root.data("action")&&(t!==!0&&this.focusable&&this._unlock(),this.hide())},_lock:function(){return this.root.addClass("--locked"),this},_unlock:function(){return this.root.removeClass("--locked"),this},link:function(){return this.super(this.root)},position:function(){return this.super(this.modal,this.root)},focus:function(){var t=this.root,o=this.modal.find(this.selector("kill"));return o.length<1&&(o=this.html("kill"),o.on("focus.mk",function(){t.focus()}),this.modal.append(o)),this},show:function(){return this._unlocked&&this.unlocked&&(this.hideAll(),this.transition(this.modal,function(){this.modal.removeClass("in")}).delay(function(){this.modal.addClass("in").attr("aria-hidden","false"),this.position(),this.focusable&&this.focus(),this.emit("show",this.root,this.modal)})),this},hide:function(t){var o,i=this.root.attr("data-action");return this._unlocked&&this.unlocked&&(o=t!==!0&&"click"!==i&&this.focusable&&this.config.delay||0,this.transition(this.modal,function(){this.modal.removeClass("out")}).delay(function(){this.modal.addClass("out").attr("aria-hidden","true"),(t||this.transitions!==!0)&&(this.clearTransitions(this.modal),this.modal.removeClass("out")),this.emit("hide",this.root,this.modal)},o)),this},hideAll:function(){return this.hide(!0)},toggle:function(){return this.isOpen?this.hide():this.show()},lock:function(){return this.root.hasClass("locked")!==!0&&(this.root.addClass("locked"),this.emit("lock",t,!0)),this},unlock:function(){return this.root.hasClass("locked")&&(this.root.removeClass("locked"),this.emit("lock",t,!1)),this}}),i.get("Dialog")});